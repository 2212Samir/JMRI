<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>
<!-- Copyright (C) JMRI 2002, 2004, 2007, 2015 All rights reserved -->
<!-- $Id: Public_Domain_FREDi_LNSV2.xml 1810 2015-11-24 12:12:00Z martin $ -->
<!--                                                                         -->
<!-- JMRI is free software; you can redistribute it and/or modify it under   -->
<!-- the terms of version 2 of the GNU General Public License as published   -->
<!-- by the Free Software Foundation. See the "COPYING" file for a copy      -->
<!-- of this license.                                                        -->
<!--                                                                         -->
<!-- JMRI is distributed in the hope that it will be useful, but WITHOUT     -->
<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or   -->
<!-- FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License    -->
<!-- for more details. -->
<decoder-config xmlns:xi="http://www.w3.org/2001/XInclude"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:noNamespaceSchemaLocation="http://jmri.org/xml/schema/decoder.xsd"
                showEmptyPanes="no">

    <version author="Bob Jacobsen" version="1" lastUpdated="20171121" />

    <decoder>

        <family name="BDL16/BDL162/BDL168" mfg="Digitrax">
            <model model="BDL16/BDL162/BDL168"/>
        </family>

        <programming direct="no" paged="no" register="no" ops="no">
            <mode>LOCONETBDOPSWMODE</mode>
        </programming>

        <variables>
          <variable CV="1" comment="Board address" item="Short Address" default="1" infoOnly="yes">
            <!-- needed to set the board address value -->
            <decVal min="1" max="127" />
            <label>Primary Address</label>
          </variable>

          <variable CV="113.01" item="Wiring Type"
                tooltip="OpSw01">
            <enumVal>
              <enumChoice>
                <choice>Direct Home Wiring</choice>
              </enumChoice>
              <enumChoice>
                <choice>Whole-layout Common Rail Wiring</choice>
              </enumChoice>
            </enumVal>
            <label>Wiring type is</label>
          </variable>

          <variable CV="113.03" item="Swap RailSync sensitivity"
                tooltip="OpSw03">
            <enumVal>
              <enumChoice>
                <choice>normal</choice>
              </enumChoice>
              <enumChoice>
                <choice>reversed (pay attention to other RailSync wire) (BDL162/BDL168 only)</choice>
              </enumChoice>
            </enumVal>
            <label>LocoNet cabling is</label>
          </variable>

          <variable CV="113.05" item="Transponding Enable1"
                tooltip="OpSw05">
            <enumVal>
              <enumChoice>
                <choice>Disable Transponding</choice>
              </enumChoice>
              <enumChoice>
                <choice>Enable Transponding</choice>
              </enumChoice>
            </enumVal>
            <label> </label>
          </variable>

          <variable CV="113.06" item="Transponding Enable2"
                tooltip="OpSw06">
            <enumVal>
              <enumChoice>
                <choice>Enable Transponding</choice>
              </enumChoice>
              <enumChoice>
                <choice>Unsupported</choice>
              </enumChoice>
            </enumVal>
            <label> </label>
          </variable>

          <variable CV="113.07" item="Transponding Enable3"
                tooltip="OpSw07">
            <enumVal>
              <enumChoice>
                <choice>Enable Transponding</choice>
              </enumChoice>
              <enumChoice>
                <choice>Unsupported</choice>
              </enumChoice>
            </enumVal>
            <label> </label>
          </variable>

          <variable item="Transponding Enable"
                tooltip="OpSw05, OpSw06, OpSw07">
            <compositeVal>
              <compositeChoice choice="Disabled">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Enabled">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
            </compositeVal>
            <label>Transponding is </label>
          </variable>

          <variable CV="113.09" item="Occupancy Force when Zone Power Off"
                tooltip="OpSw09">
              <enumVal>
                  <enumChoice>
                      <choice>report occupied when zone power is off</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>are not forced when zone power is off</choice>
                  </enumChoice>
              </enumVal>
              <label>Detection Sections</label>
          </variable>

          <variable CV="113.10" item="Detection section 16"
                tooltip="OpSw10">
              <enumVal>
                  <enumChoice>
                      <choice>is a normal Detection Section</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>is a Zone Power ON qualifier for whole-layout common-rail wired systems</choice>
                  </enumChoice>
              </enumVal>
              <label>Detection Section 16</label>
          </variable>

          <variable CV="113.11" item="BDL as LocoNet Master"
                tooltip="OpSw11">
              <enumVal>
                  <enumChoice>
                      <choice>acts as the LocoNet Master</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>is not the LocoNet Master</choice>
                  </enumChoice>
              </enumVal>
              <label>This BDL16x</label>
          </variable>

          <variable CV="113.12" item="BDL as LocoNet Termination"
                tooltip="OpSw12">
              <enumVal>
                  <enumChoice>
                      <choice>provides LocoNet termination</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>does not terminate LocoNet</choice>
                  </enumChoice>
              </enumVal>
              <label>This BDL16x</label>
          </variable>

          <variable CV="113.13" item="Power-up delay"
                tooltip="OpSw13">
              <enumVal>
                  <enumChoice>
                      <choice>Wait for 5-second power-up delay (for DB150 compatibility)</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Wait for 0.5 second power-up delay</choice>
                  </enumChoice>
              </enumVal>
              <label>This BDL16x will</label>
          </variable>

          <variable CV="113.19" item="Detection threshold"
                tooltip="OpSw19">
              <enumVal>
                  <enumChoice>
                      <choice>Resistance below about 22K Ohms is shown as Occupied</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Resistance below about 10K Ohms is shown as Occupied</choice>
                  </enumChoice>
              </enumVal>
              <label>Detection Section Sensitivity:</label>
          </variable>

          <variable CV="113.25" item="LED Output Mode"
                tooltip="OpSw25">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.26" item="Switch Mode LEDs source"
                tooltip="OpSw26">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.30" item="RailSync Sample Delay1"
                tooltip="OpSw30">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.31" item="RailSync Sample Delay2"
                tooltip="OpSw31">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable item="RailSync Sample Delay"
                tooltip="OpSw30, OpSw31">
            <compositeVal>
              <compositeChoice choice="Normal">
                <compositeSetting label="RailSync Sample Delay1" value="0"/>
                <compositeSetting label="RailSync Sample Delay2" value="0"/>
              </compositeChoice>
              <compositeChoice choice="slightly delayed (BDL162/BDL168 only)">
                <compositeSetting label="RailSync Sample Delay1" value="1"/>
                <compositeSetting label="RailSync Sample Delay2" value="0"/>
              </compositeChoice>
              <compositeChoice choice="moderately delayed (BDL162/BDL168 only)">
                <compositeSetting label="RailSync Sample Delay1" value="0"/>
                <compositeSetting label="RailSync Sample Delay2" value="1"/>
              </compositeChoice>
              <compositeChoice choice="significantly delayed (BDL162/BDL168 only)">
                <compositeSetting label="RailSync Sample Delay1" value="1"/>
                <compositeSetting label="RailSync Sample Delay2" value="1"/>
              </compositeChoice>
            </compositeVal>
            <label>Sampling of RailSync is </label>
          </variable>

          <variable item="LED Outputs"
                tooltip="OpSw25, OpSw26">
            <compositeVal>
              <compositeChoice choice="show Detection Section Occupancy">
                <compositeSetting label="LED Output Mode" value="0"/>
                <compositeSetting label="Switch Mode LEDs source" value="0"/>
              </compositeChoice>
              <compositeChoice choice="show Switch state (from DCC track signal)">
                <compositeSetting label="LED Output Mode" value="1"/>
                <compositeSetting label="Switch Mode LEDs source" value="0"/>
              </compositeChoice>
              <compositeChoice choice="show Detection Section Occupancy (Alternate)">
                <compositeSetting label="LED Output Mode" value="0"/>
                <compositeSetting label="Switch Mode LEDs source" value="1"/>
              </compositeChoice>
              <compositeChoice choice="show Switch state (from LocoNet Switch messages)">
                <compositeSetting label="LED Output Mode" value="1"/>
                <compositeSetting label="Switch Mode LEDs source" value="1"/>
              </compositeChoice>
            </compositeVal>
            <label>BDL16x LED outputs </label>
          </variable>

          <variable CV="113.36" item="Interrogation Response"
                tooltip="OpSw36">
              <enumVal>
                  <enumChoice>
                      <choice>Responds with status at GPON and interrogate commmands</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Responds only to interrogate commmands (BDL168 only)</choice>
                  </enumChoice>
              </enumVal>
              <label>This BDL168 </label>
          </variable>

          <variable CV="113.42" item="First Interrogate Enable"
                tooltip="OpSw42">
              <enumVal>
                  <enumChoice>
                      <choice>Standard interrogation</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Ignore OpSw36 setting; reply at every interrogation (BDL168 only)</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable item="Interrogation actions"
                tooltip="OpSw36, OpSw42">
              <compositeVal>
                  <compositeChoice choice="Reports detection section status at GPON and all except first Interrogation attempt">
                      <compositeSetting label="Interrogation Response" value="0"/>
                      <compositeSetting label="First Interrogate Enable" value="0"/>
                  </compositeChoice>
                  <compositeChoice choice="Reports detection section status at all except first Interrofation attempt (BDL168 only)">
                      <compositeSetting label="Interrogation Response" value="1"/>
                      <compositeSetting label="First Interrogate Enable" value="0"/>
                  </compositeChoice>
                  <compositeChoice choice="Reports detection section status at GPON and at all Interrogage attempt (BDL168 only)">
                      <compositeSetting label="Interrogation Response" value="0"/>
                      <compositeSetting label="First Interrogate Enable" value="1"/>
                  </compositeChoice>
                  <compositeChoice choice="Reports detection section status at all Interrogate attempt (BDL168 only)">
                      <compositeSetting label="Interrogation Response" value="1"/>
                      <compositeSetting label="First Interrogate Enable" value="1"/>
                  </compositeChoice>
              </compositeVal>
              <label>This BDL168 </label>
          </variable>

          <variable CV="113.37" item="Detection Section Timing1"
                tooltip="OpSw37">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed (BDL168 only)</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.38" item="Detection Section Timing2"
                tooltip="OpSw38">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed (BDL168 only)</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable item="Detection Section Timing"
                tooltip="OpSw37, OpSw38">
              <compositeVal>
                <compositeChoice choice="Standard">
                  <compositeSetting label="Detection Section Timing1" value="0"/>
                  <compositeSetting label="Detection Section Timing2" value="0"/>
                </compositeChoice>
                <compositeChoice choice="Slow (BDL168 only)">
                  <compositeSetting label="Detection Section Timing1" value="1"/>
                  <compositeSetting label="Detection Section Timing2" value="0"/>
                </compositeChoice>
                <compositeChoice choice="Standard (alternate) (BDL168 only)">
                  <compositeSetting label="Detection Section Timing1" value="0"/>
                  <compositeSetting label="Detection Section Timing2" value="1"/>
                </compositeChoice>
                <compositeChoice choice="Twice slow (BDL160 only)">
                  <compositeSetting label="Detection Section Timing1" value="1"/>
                  <compositeSetting label="Detection Section Timing2" value="1"/>
                </compositeChoice>
              </compositeVal>
              <label>Detection Section timing is</label>
          </variable>

          <variable CV="113.39" item="Transponder Tracking Mode"
                tooltip="OpSw39">
              <enumVal>
                  <enumChoice>
                      <choice>Sequential Mode</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Verbose Mode (BDL168 only)</choice>
                  </enumChoice>
              </enumVal>
              <label>Transponder Tracking uses</label>
          </variable>

          <variable CV="113.43" item="Anti-chatter Sensitivity1"
                tooltip="OpSw43">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.44" item="Anti-chatter Sensitivity2"
                tooltip="OpSw44">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable item="Anti-Chatter Filtering"
                tooltip="OpSw43, OpSw44">
            <compositeVal>
              <compositeChoice choice="Maximum Anti-Chatter Filter sensitivity">
                <compositeSetting label="Anti-chatter Sensitivity1" value="0"/>
                <compositeSetting label="Anti-chatter Sensitivity2" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Anti-Chatter Filter is disabled (BDL168 only)">
                <compositeSetting label="Anti-chatter Sensitivity1" value="1"/>
                <compositeSetting label="Anti-chatter Sensitivity2" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Standard Anti-Chatter Filter sensitivity (BDL168 only)">
                <compositeSetting label="Anti-chatter Sensitivity1" value="0"/>
                <compositeSetting label="Anti-chatter Sensitivity2" value="1"/>
              </compositeChoice>
              <compositeChoice choice="Anti-Chatter Filter is disabled (Alternate) (BDL168 only)">
                <compositeSetting label="Anti-chatter Sensitivity1" value="1"/>
                <compositeSetting label="Anti-chatter Sensitivity2" value="1"/>
              </compositeChoice>
            </compositeVal>
            <label>BDL16x LED outputs </label>
          </variable>

          <variable CV="113.45" item="Transponding Messages at GPOFF"
                tooltip="OpSw45">
              <enumVal>
                  <enumChoice>
                      <choice>sends Transponding messages</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>does not send Transponding messages (BDL168 only)</choice>
                  </enumChoice>
              </enumVal>
              <label>At reception of GPOFF: </label>
          </variable>


        </variables>
    </decoder>
    <pane>
        <name>Basic BDL16/BDL162/BDL168 OpSw Settings</name>
        <column>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Detection Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Wiring Type"/>
            <display item="Occupancy Force when Zone Power Off"/>
            <display item="Detection section 16"/>
            <display item="Detection threshold"/>
            <display item="Detection Section Timing"/>
            <label><text> </text></label>
            <separator/>

            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;LocoNet Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="BDL as LocoNet Master"/>
            <display item="BDL as LocoNet Termination"/>
            <display item="Power-up delay"/>
            <display item="Swap RailSync sensitivity"/>
            <display item="RailSync Sample Delay"/>

            <display item="Interrogation actions"/>

            <label><text> </text></label>
            <separator/>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;LED Output Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="LED Outputs"/>
            <label><text>   </text></label>

        </column>
    </pane>
    <pane>
        <name>Transponding Controls</name>
        <column>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Transponding Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Transponding Enable"/>
            <display item="Anti-chatter Filtering"/>
            <display item="Transponding Messages at GPOFF"/>
            <display item="Transponder Tracking Mode"/>
            <display item="Anti-Chatter Filtering"/>
            <label><text>   </text></label>
        </column>
    </pane>

</decoder-config>