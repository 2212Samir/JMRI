<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="../XSLT/decoder.xsl"?>
<!-- Copyright (C) JMRI 2002, 2004, 2007, 2015 All rights reserved -->
<!-- $Id: Public_Domain_FREDi_LNSV2.xml 1810 2015-11-24 12:12:00Z martin $ -->
<!--                                                                         -->
<!-- JMRI is free software; you can redistribute it and/or modify it under   -->
<!-- the terms of version 2 of the GNU General Public License as published   -->
<!-- by the Free Software Foundation. See the "COPYING" file for a copy      -->
<!-- of this license.                                                        -->
<!--                                                                         -->
<!-- JMRI is distributed in the hope that it will be useful, but WITHOUT     -->
<!-- ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or   -->
<!-- FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License    -->
<!-- for more details. -->
<decoder-config xmlns:xi="http://www.w3.org/2001/XInclude"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:noNamespaceSchemaLocation="http://jmri.org/xml/schema/decoder.xsd"
                showEmptyPanes="no">

    <version author="Bob Jacobsen" version="1" lastUpdated="20171121" />

    <decoder>

        <family name="BDL16" mfg="Digitrax">
            <model model="BDL16"/>
        </family>

        <programming direct="no" paged="no" register="no" ops="no">
            <mode>LOCONETBDOPSWMODE</mode>
        </programming>

        <variables>
          <variable CV="1" comment="Board address" item="Short Address" default="1" infoOnly="yes">
            <!-- needed to set the board address value -->
            <decVal min="1" max="128" />
            <label>Board Address (Board ID)</label>
          </variable>

          <variable CV="113.01" item="Wiring Type" default="0"
                tooltip="OpSw01">
            <enumVal>
              <enumChoice>
                <choice>Direct Home Wiring</choice>
              </enumChoice>
              <enumChoice>
                <choice>Whole-layout Common Rail Wiring</choice>
              </enumChoice>
            </enumVal>
            <label>Wiring type is</label>
          </variable>

          <variable CV="113.05" item="Transponding Enable1" default="1"
                tooltip="OpSw05">
            <enumVal>
              <enumChoice>
                <choice>Disable Transponding</choice>
              </enumChoice>
              <enumChoice>
                <choice>Enable Transponding</choice>
              </enumChoice>
            </enumVal>
            <label> </label>
          </variable>

          <variable CV="113.06" item="Transponding Enable2" default="0"
                tooltip="OpSw06">
            <enumVal>
              <enumChoice>
                <choice>Enable Transponding</choice>
              </enumChoice>
              <enumChoice>
                <choice>Unsupported</choice>
              </enumChoice>
            </enumVal>
            <label> </label>
          </variable>

          <variable CV="113.07" item="Transponding Enable3" default="0"
                tooltip="OpSw07">
            <enumVal>
              <enumChoice>
                <choice>Enable Transponding</choice>
              </enumChoice>
              <enumChoice>
                <choice>Unsupported</choice>
              </enumChoice>
            </enumVal>
            <label> </label>
          </variable>

          <variable item="Transponding Enable"
                tooltip="OpSw05, OpSw06, OpSw07">
            <compositeVal>
              <compositeChoice choice="Disabled">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Enabled">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="0"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="0"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="0"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
              <compositeChoice choice="Unsupported option - not recommended">
                <compositeSetting label="Transponding Enable1" value="1"/>
                <compositeSetting label="Transponding Enable2" value="1"/>
                <compositeSetting label="Transponding Enable3" value="1"/>
              </compositeChoice>
            </compositeVal>
            <label>Transponding is </label>
          </variable>

          <variable CV="113.09" item="Occupancy Force when Zone Power Off" default="0"
                tooltip="OpSw09">
              <enumVal>
                  <enumChoice>
                      <choice>report occupied when zone power is off</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>are not forced when zone power is off</choice>
                  </enumChoice>
              </enumVal>
              <label>Detection Sections</label>
          </variable>

          <variable CV="113.10" item="Detection section 16" default="0"
                tooltip="OpSw10">
              <enumVal>
                  <enumChoice>
                      <choice>is a normal Detection Section</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>is a Zone Power ON qualifier for whole-layout common-rail wired systems</choice>
                  </enumChoice>
              </enumVal>
              <label>Detection Section 16</label>
          </variable>

          <variable CV="113.11" item="BDL as LocoNet Master" default="0" 
                tooltip="OpSw11">
              <enumVal>
                  <enumChoice>
                      <choice>acts as the LocoNet Master</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>is not the LocoNet Master</choice>
                  </enumChoice>
              </enumVal>
              <label>This BDL16x</label>
          </variable>

          <variable CV="113.12" item="BDL as LocoNet Termination" default="0" 
                tooltip="OpSw12">
              <enumVal>
                  <enumChoice>
                      <choice>provides LocoNet termination</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>does not terminate LocoNet</choice>
                  </enumChoice>
              </enumVal>
              <label>This BDL16x</label>
          </variable>

          <variable CV="113.13" item="Power-up delay" default="0"
                tooltip="OpSw13">
              <enumVal>
                  <enumChoice>
                      <choice>Wait for 5-second power-up delay (for DB150 compatibility)</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Wait for 0.5 second power-up delay</choice>
                  </enumChoice>
              </enumVal>
              <label>This BDL16x will</label>
          </variable>

          <variable CV="113.19" item="Detection threshold" default="0"
                tooltip="OpSw19">
              <enumVal>
                  <enumChoice>
                      <choice>Resistance below about 22K Ohms is shown as Occupied</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Resistance below about 10K Ohms is shown as Occupied</choice>
                  </enumChoice>
              </enumVal>
              <label>Detection Section Sensitivity:</label>
          </variable>

          <variable CV="113.25" item="LED Output Mode" default="0"
                tooltip="OpSw25">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.26" item="Switch Mode LEDs source" default="0"
                tooltip="OpSw26">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.30" item="RailSync Sample Delay1" default="0"
                tooltip="OpSw30">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable CV="113.31" item="RailSync Sample Delay2" default="0"
                tooltip="OpSw31">
              <enumVal>
                  <enumChoice>
                      <choice>Thrown</choice>
                  </enumChoice>
                  <enumChoice>
                      <choice>Closed</choice>
                  </enumChoice>
              </enumVal>
          </variable>

          <variable item="RailSync Sample Delay"
                tooltip="OpSw30, OpSw31">
            <compositeVal>
              <compositeChoice choice="Normal">
                <compositeSetting label="RailSync Sample Delay1" value="0"/>
                <compositeSetting label="RailSync Sample Delay2" value="0"/>
              </compositeChoice>
            </compositeVal>
            <label>Sampling of RailSync is </label>
          </variable>

          <variable item="LED Outputs"
                tooltip="OpSw25, OpSw26">
            <compositeVal>
              <compositeChoice choice="show Detection Section Occupancy">
                <compositeSetting label="LED Output Mode" value="0"/>
                <compositeSetting label="Switch Mode LEDs source" value="0"/>
              </compositeChoice>
              <compositeChoice choice="show Switch state (from DCC track signal)">
                <compositeSetting label="LED Output Mode" value="1"/>
                <compositeSetting label="Switch Mode LEDs source" value="0"/>
              </compositeChoice>
              <compositeChoice choice="show Detection Section Occupancy (Alternate)">
                <compositeSetting label="LED Output Mode" value="0"/>
                <compositeSetting label="Switch Mode LEDs source" value="1"/>
              </compositeChoice>
              <compositeChoice choice="show Switch state (from LocoNet Switch messages)">
                <compositeSetting label="LED Output Mode" value="1"/>
                <compositeSetting label="Switch Mode LEDs source" value="1"/>
              </compositeChoice>
            </compositeVal>
            <label>BDL16x LED outputs </label>
          </variable>
        </variables>
    </decoder>
  <pane>
      <name>Basic</name>
      <column>
          <display item="Short Address"/>
          <label>
              <text> </text>
          </label>
          <label>
            <text>&lt;html&gt;&lt;p&gt;
                LocoNet messaging limits the supported Board Address (Board ID)
                range to addresses between 1 and 128.  This tool cannot access 
                &lt;p&gt;BDL16 devices outside of this range.
                &lt;p&gt;
                &lt;p&gt;This roster entry will only access the specified 
                BDL16 if the Board Address (Active Address), on the 
                &lt;p&gt;"Basic" sheet, is correct when the programmer is opened.
                &lt;p&gt;
                &lt;p&gt;If the Board Address (Active Address) has been changed since
                the programmer was opened, the programmer will attempt to access the
                &lt;p&gt;BDL16 address which was specified in the 
                Roster entry when the progammer was opened.
                &lt;p&gt;
                &lt;p&gt;After making a change to the Roster entry's Board Address
                (Active Address) on the "Basic" sheet, save and close the programmer
                &lt;p&gt;window and re-open the Roster entry to ensure that the
                the programmer will use the modified Active Address for accesses
                &lt;p&gt;to the device.
                &lt;p&gt;
                &lt;p&gt;Note that BDL16x and PM4x documentation refers 
                to Board Address, while DS64 and SE8C documentation refers to 
                &lt;p&gt;Board ID.  These are equivalent concepts.
            &lt;/html&gt;</text>
          </label>
      </column>
  </pane>

    <pane>
        <name>Basic BDL16 OpSw Settings</name>
        <column>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Detection Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Wiring Type"/>
            <display item="Occupancy Force when Zone Power Off"/>
            <display item="Detection section 16"/>
            <display item="Detection threshold"/>
            <label><text> </text></label>
            <separator/>

            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;LocoNet Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="BDL as LocoNet Master"/>
            <display item="BDL as LocoNet Termination"/>
            <display item="Power-up delay"/>
            <display item="Swap RailSync sensitivity"/>


            <label><text> </text></label>
            <separator/>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;LED Output Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="LED Outputs"/>
            <label><text>   </text></label>
            <separator/>
            <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;&lt;h2&gt;&lt;strong&gt;Transponding Characteristics&lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text></label>
            <display item="Transponding Enable"/>
            <label><text>   </text></label>

        </column>
    </pane>
  <pane>
      <name>Notes</name>
      <column>
        <label><text>&lt;html&gt;&lt;span style=&quot;color: black;&quot;&gt;
            &lt;h2&gt;&lt;strong&gt;Notes on BDL16 Roster Entries and Programming
            &lt;/strong&gt;&lt;/h2&gt;&lt;/html&gt;</text>
        </label>
        <label>
            <text>&lt;html&gt;&lt;/strong&gt;&lt;ul&gt;
                &lt;li&gt;The BDL16 &lt;em&gt;must&lt;/em&gt; be in its normal
                operating mode in order to respond to this programmer's read and
                write operations.&lt;/li&gt;
                &lt;li&gt;
                &lt;p&gt;See the "Basic" sheet for the programmer's limitations with
                respect to Board Address.&lt;/li&gt;
            &lt;/ul&gt;&lt;/html&gt;</text>
        </label>
      </column>
  </pane>
</decoder-config>